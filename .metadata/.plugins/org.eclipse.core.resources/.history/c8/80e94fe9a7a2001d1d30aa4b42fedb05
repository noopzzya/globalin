<%@page import="org.apache.jasper.tagplugins.jstl.core.Catch"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.sql.*" %>

<%
	Class.forName("oracle.jdbc.driver.OracleDriver");
	Connection conn = null;
	Statement stmt = null;
	ResultSet rs = null;
	
	String id = "",
			passwd = "",
			mem_num1 = "",
			mem_num2 = "",
			e_mail = "",
			phone = "",
			zipcode = "",
			address = "",
			job = "";
	
	int counter = 0;
	
	try{
		conn = DriverManager.getConnection(
				//"jdbc:oracle:thin:@127.0.0.1:1521:orcl",
				"jdbc:oracle:thin:@localhost:1521:orcl",
				"scott", "tiger");
		
		stmt = conn.createStatement();
		rs = stmt.executeQuery("select * from tempmember");
		
%>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSP에서 데이터베이스 연동</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffcc">
<h2>JSP 스크립틀릿에서 데티터베이스 연동</h2><br>
<h3>회원정보</h3>
<table>
<tr>
<%

%>
</tr>
</table>
<br><br>
total records : <%=counter %>
<%
	}catch(SQLException ss){
		//ss.printStackTrace();
		System.out.println("SQL exception");
	}catch(Exception ee){
		System.out.println("Exception");
	}finally{
		
		if(rs != null)
			try{
				rs.close();
			}catch(SQLException ex){}
		
		if(stmt != null)
			try{
				stmt.close();
			}catch(SQLException ex){}
		
		if(conn != null)
			try{
				conn.close();
			}catch(SQLException ex){}
		
	}
%>

</body>
</html>